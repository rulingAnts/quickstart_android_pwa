<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2196F3">
    <meta name="description" content="Comparative Wordlist Elicitation Tool for linguistic fieldwork">
    
    <title>Wordlist Elicitation Tool</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <header class="app-header">
                <h1>Wordlist Elicitation Tool</h1>
            </header>
            
            <main class="main-content">
                <div class="hero-icon">
                    <svg viewBox="0 0 24 24" width="80" height="80" fill="currentColor">
                        <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
                    </svg>
                </div>
                
                <h2 class="app-title">Comparative Wordlist<br>Elicitation Tool</h2>
                
                <div class="progress-card">
                    <h3>Progress</h3>
                    <div class="stats-container">
                        <div class="stat-item">
                            <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                                <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                            </svg>
                            <div class="stat-value" id="total-count">0</div>
                            <div class="stat-label">Total</div>
                        </div>
                        <div class="stat-item">
                            <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            <div class="stat-value" id="completed-count">0</div>
                            <div class="stat-label">Completed</div>
                        </div>
                        <div class="stat-item">
                            <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                <circle cx="12" cy="12" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <div class="stat-value" id="remaining-count">0</div>
                            <div class="stat-label">Remaining</div>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="main-button" id="import-btn">
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                            <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                        </svg>
                        <span>Import Wordlist</span>
                    </button>
                    
                    <button class="main-button" id="elicitation-btn" disabled>
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                            <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
                        </svg>
                        <span>Start Elicitation</span>
                    </button>
                    
                    <button class="main-button" id="export-btn" disabled>
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
                        </svg>
                        <span>Export Data</span>
                    </button>
                </div>
            </main>
        </div>
        
        <!-- Import Screen -->
        <div id="import-screen" class="screen">
            <header class="app-header">
                <button class="back-button" id="import-back-btn">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h1>Import Wordlist</h1>
            </header>
            
            <main class="main-content">
                <div class="import-container">
                    <div class="info-box">
                        <p>Select a Dekereke XML wordlist file to import.</p>
                        <p>The file should contain reference numbers, glosses, and optional picture references.</p>
                    </div>
                    
                    <input type="file" id="file-input" accept=".xml" style="display: none;">
                    <button class="main-button" id="select-file-btn">
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                            <path d="M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"/>
                        </svg>
                        <span>Select XML File</span>
                    </button>
                    
                    <div id="import-status" class="status-message"></div>
                </div>
            </main>
        </div>
        
        <!-- Elicitation Screen -->
        <div id="elicitation-screen" class="screen">
            <header class="app-header">
                <button class="back-button" id="elicitation-back-btn">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h1>Elicitation</h1>
            </header>
            
            <main class="main-content elicitation-content">
                <div class="word-card">
                    <div class="word-reference" id="word-reference">0001</div>
                    <div class="word-gloss" id="word-gloss">body</div>
                    
                    <div class="picture-container" id="picture-container" style="display: none;">
                        <img id="word-picture" alt="Word illustration">
                    </div>
                    
                    <div class="transcription-container">
                        <label for="transcription-input">Local Transcription:</label>
                        <input type="text" id="transcription-input" class="transcription-input" placeholder="Enter transcription...">
                    </div>
                    
                    <div class="recording-container">
                        <button class="record-button" id="record-btn">
                            <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor">
                                <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                                <path d="M17.3 11c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
                            </svg>
                            <span id="record-text">Record</span>
                        </button>
                        
                        <button class="play-button" id="play-btn" style="display: none;">
                            <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <span>Play</span>
                        </button>
                    </div>
                    
                    <div id="recording-status" class="status-message"></div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="nav-button" id="prev-btn">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                        </svg>
                        <span>Previous</span>
                    </button>
                    
                    <span class="word-counter" id="word-counter">1 / 200</span>
                    
                    <button class="nav-button" id="next-btn">
                        <span>Next</span>
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                        </svg>
                    </button>
                </div>
            </main>
        </div>
        
        <!-- Export Screen -->
        <div id="export-screen" class="screen">
            <header class="app-header">
                <button class="back-button" id="export-back-btn">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <h1>Export Data</h1>
            </header>
            
            <main class="main-content">
                <div class="export-container">
                    <div class="info-box">
                        <p>Export all collected data as a ZIP archive containing:</p>
                        <ul>
                            <li>Dekereke XML file with transcriptions</li>
                            <li>Audio recordings (WAV format)</li>
                            <li>Consent log</li>
                        </ul>
                    </div>
                    
                    <div class="export-stats">
                        <div class="stat-row">
                            <span>Total Entries:</span>
                            <span id="export-total">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Completed:</span>
                            <span id="export-completed">0</span>
                        </div>
                        <div class="stat-row">
                            <span>With Audio:</span>
                            <span id="export-audio">0</span>
                        </div>
                    </div>
                    
                    <button class="main-button" id="export-data-btn">
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="currentColor">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
                        </svg>
                        <span>Export ZIP Archive</span>
                    </button>
                    
                    <div id="export-status" class="status-message"></div>
                </div>
            </main>
        </div>
    </div>
    
    <script src="js/storage.js"></script>
    <script src="js/xml-parser.js"></script>
    <script src="js/audio-recorder.js"></script>
    <script src="js/export.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(registration => console.log('Service Worker registered'))
                .catch(error => console.error('Service Worker registration failed:', error));
        }
    </script>
</body>
</html>
